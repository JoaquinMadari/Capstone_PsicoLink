-- WARNING: This schema is for context only and is not meant to be run.
-- Table order and constraints may not be valid for execution.

CREATE TABLE public.api_appointment (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  start_datetime timestamp with time zone NOT NULL,
  duration_minutes integer NOT NULL CHECK (duration_minutes >= 0),
  status character varying NOT NULL,
  notes text NOT NULL,
  created_at timestamp with time zone NOT NULL,
  patient_id bigint NOT NULL,
  professional_id bigint NOT NULL,
  professional_role character varying,
  time_range tstzrange,
  modality character varying,
  reason character varying NOT NULL,
  CONSTRAINT api_appointment_pkey PRIMARY KEY (id),
  CONSTRAINT api_appointment_patient_id_52c787b0_fk_api_customuser_id FOREIGN KEY (patient_id) REFERENCES public.api_customuser(id),
  CONSTRAINT api_appointment_professional_id_7f3d25a4_fk_api_customuser_id FOREIGN KEY (professional_id) REFERENCES public.api_customuser(id)
);
CREATE TABLE public.api_customuser (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  password character varying NOT NULL,
  last_login timestamp with time zone,
  is_superuser boolean NOT NULL,
  username character varying NOT NULL UNIQUE,
  first_name character varying NOT NULL,
  last_name character varying NOT NULL,
  email character varying NOT NULL UNIQUE,
  is_staff boolean NOT NULL,
  is_active boolean NOT NULL,
  date_joined timestamp with time zone NOT NULL,
  role character varying NOT NULL,
  CONSTRAINT api_customuser_pkey PRIMARY KEY (id)
);
CREATE TABLE public.api_customuser_groups (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  customuser_id bigint NOT NULL,
  group_id integer NOT NULL,
  CONSTRAINT api_customuser_groups_pkey PRIMARY KEY (id),
  CONSTRAINT api_customuser_group_customuser_id_9eb4b783_fk_api_custo FOREIGN KEY (customuser_id) REFERENCES public.api_customuser(id),
  CONSTRAINT api_customuser_groups_group_id_f049027c_fk_auth_group_id FOREIGN KEY (group_id) REFERENCES public.auth_group(id)
);
CREATE TABLE public.api_customuser_user_permissions (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  customuser_id bigint NOT NULL,
  permission_id integer NOT NULL,
  CONSTRAINT api_customuser_user_permissions_pkey PRIMARY KEY (id),
  CONSTRAINT api_customuser_user__customuser_id_5365c9ba_fk_api_custo FOREIGN KEY (customuser_id) REFERENCES public.api_customuser(id),
  CONSTRAINT api_customuser_user__permission_id_8735d73e_fk_auth_perm FOREIGN KEY (permission_id) REFERENCES public.auth_permission(id)
);
CREATE TABLE public.api_organizacionprofile (
  user_id bigint NOT NULL,
  organization_name character varying NOT NULL,
  organization_rut character varying NOT NULL,
  contact_email character varying NOT NULL,
  contact_phone character varying,
  num_employees integer,
  company_sector character varying,
  location character varying,
  service_type_required character varying,
  preference_modality character varying,
  type_of_attention character varying,
  service_frequency character varying,
  CONSTRAINT api_organizacionprofile_pkey PRIMARY KEY (user_id),
  CONSTRAINT api_organizacionprofile_user_id_f3d31bc2_fk_api_customuser_id FOREIGN KEY (user_id) REFERENCES public.api_customuser(id)
);
CREATE TABLE public.api_pacienteprofile (
  user_id bigint NOT NULL,
  rut character varying NOT NULL,
  phone character varying NOT NULL,
  inclusive_orientation boolean NOT NULL,
  base_disease character varying NOT NULL,
  disability boolean NOT NULL,
  description text,
  consultation_reason character varying,
  preference_modality character varying,
  preferred_focus character varying,
  age integer NOT NULL,
  gender character varying NOT NULL,
  nationality character varying NOT NULL,
  CONSTRAINT api_pacienteprofile_pkey PRIMARY KEY (user_id),
  CONSTRAINT api_pacienteprofile_user_id_70dbaa06_fk_api_customuser_id FOREIGN KEY (user_id) REFERENCES public.api_customuser(id)
);
CREATE TABLE public.api_psicologoprofile (
  user_id bigint NOT NULL,
  rut character varying NOT NULL,
  phone character varying NOT NULL,
  specialty character varying NOT NULL,
  license_number character varying NOT NULL,
  main_focus character varying NOT NULL,
  therapeutic_techniques text NOT NULL,
  style_of_attention text NOT NULL,
  attention_schedule character varying NOT NULL,
  work_modality character varying NOT NULL,
  certificates character varying NOT NULL,
  inclusive_orientation boolean NOT NULL,
  languages character varying,
  experience_years integer,
  curriculum_vitae character varying,
  cases_attended integer NOT NULL,
  rating numeric NOT NULL,
  age integer NOT NULL,
  gender character varying NOT NULL,
  nationality character varying NOT NULL,
  specialty_other character varying,
  CONSTRAINT api_psicologoprofile_pkey PRIMARY KEY (user_id),
  CONSTRAINT api_psicologoprofile_user_id_60f32baa_fk_api_customuser_id FOREIGN KEY (user_id) REFERENCES public.api_customuser(id)
);
CREATE TABLE public.auth_group (
  id integer GENERATED ALWAYS AS IDENTITY NOT NULL,
  name character varying NOT NULL UNIQUE,
  CONSTRAINT auth_group_pkey PRIMARY KEY (id)
);
CREATE TABLE public.auth_group_permissions (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  group_id integer NOT NULL,
  permission_id integer NOT NULL,
  CONSTRAINT auth_group_permissions_pkey PRIMARY KEY (id),
  CONSTRAINT auth_group_permissions_group_id_b120cbf9_fk_auth_group_id FOREIGN KEY (group_id) REFERENCES public.auth_group(id),
  CONSTRAINT auth_group_permissio_permission_id_84c5c92e_fk_auth_perm FOREIGN KEY (permission_id) REFERENCES public.auth_permission(id)
);
CREATE TABLE public.auth_permission (
  id integer GENERATED ALWAYS AS IDENTITY NOT NULL,
  name character varying NOT NULL,
  content_type_id integer NOT NULL,
  codename character varying NOT NULL,
  CONSTRAINT auth_permission_pkey PRIMARY KEY (id),
  CONSTRAINT auth_permission_content_type_id_2f476e4b_fk_django_co FOREIGN KEY (content_type_id) REFERENCES public.django_content_type(id)
);
CREATE TABLE public.django_admin_log (
  id integer GENERATED ALWAYS AS IDENTITY NOT NULL,
  action_time timestamp with time zone NOT NULL,
  object_id text,
  object_repr character varying NOT NULL,
  action_flag smallint NOT NULL CHECK (action_flag >= 0),
  change_message text NOT NULL,
  content_type_id integer,
  user_id bigint NOT NULL,
  CONSTRAINT django_admin_log_pkey PRIMARY KEY (id),
  CONSTRAINT django_admin_log_content_type_id_c4bce8eb_fk_django_co FOREIGN KEY (content_type_id) REFERENCES public.django_content_type(id),
  CONSTRAINT django_admin_log_user_id_c564eba6_fk_api_customuser_id FOREIGN KEY (user_id) REFERENCES public.api_customuser(id)
);
CREATE TABLE public.django_content_type (
  id integer GENERATED ALWAYS AS IDENTITY NOT NULL,
  app_label character varying NOT NULL,
  model character varying NOT NULL,
  CONSTRAINT django_content_type_pkey PRIMARY KEY (id)
);
CREATE TABLE public.django_migrations (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  app character varying NOT NULL,
  name character varying NOT NULL,
  applied timestamp with time zone NOT NULL,
  CONSTRAINT django_migrations_pkey PRIMARY KEY (id)
);
CREATE TABLE public.django_session (
  session_key character varying NOT NULL,
  session_data text NOT NULL,
  expire_date timestamp with time zone NOT NULL,
  CONSTRAINT django_session_pkey PRIMARY KEY (session_key)
);