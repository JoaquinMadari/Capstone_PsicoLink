<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button
        [defaultHref]="backHref"
        routerDirection="back"
        (click)="onBackClick()">
      </ion-back-button>
    </ion-buttons>
    <ion-title>Administraci√≥n de Tickets</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Tickets del Sistema</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="ion-padding">
    <p>Lista de todos los tickets de soporte del sistema. Haz clic para responder.</p>
  </div>
  
  <ion-list *ngIf="!loading && !error">
    <ion-item 
      *ngFor="let ticket of tickets" 
      [routerLink]="['/admin/tickets', ticket.id, 'responder']" 
      button 
      detail="false">
      <ion-icon 
        slot="start" 
        [name]="getStatusIcon(ticket.status)" 
        [color]="getStatusColor(ticket.status)"
      ></ion-icon>
      
      <ion-label>
        <h2>Ticket #{{ ticket.id }} - {{ ticket.subject }}</h2>
        <p>{{ getSummary(ticket.message) }}</p>
      </ion-label>
      
      <ion-note 
        slot="end" 
        [color]="getStatusColor(ticket.status)">
        {{ ticket.status | titlecase }} 
        </ion-note>

      <ion-icon slot="end" name="arrow-forward-outline"></ion-icon>
    </ion-item>
    
    <ion-item *ngIf="tickets.length === 0 && !loading">
      <ion-label class="ion-text-center ion-padding-vertical">
        No hay tickets de soporte registrados en el sistema.
      </ion-label>
    </ion-item>
  </ion-list>
</ion-content>

