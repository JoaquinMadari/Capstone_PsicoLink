<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Completa tu Perfil</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">

  <ion-card *ngIf="role">
    <ion-card-header>
      <ion-card-title>Datos de {{ role | titlecase }}</ion-card-title>
      <ion-card-subtitle>Campos marcados con (*) son obligatorios.</ion-card-subtitle>
    </ion-card-header>

    <ion-card-content>
      <form [formGroup]="profileForm" (ngSubmit)="saveProfile()">

        <h2>Información Básica (*)</h2>
        <ion-item>
          <ion-label position="floating">RUT *</ion-label>
          <ion-input type="text" formControlName="rut"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Edad *</ion-label>
          <ion-input type="number" formControlName="age"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Género *</ion-label>
          <ion-select formControlName="gender" placeholder="Selecciona">
            <ion-select-option value="masculino">Masculino</ion-select-option>
            <ion-select-option value="femenino">Femenino</ion-select-option>
            <ion-select-option value="otro">Otro/No Binario</ion-select-option>
            </ion-select>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Nacionalidad *</ion-label>
          <ion-input type="text" formControlName="nationality"></ion-input>
        </ion-item>
        
        <ion-item>
          <ion-label position="floating">Teléfono *</ion-label>
          <ion-input type="tel" formControlName="phone"></ion-input>
        </ion-item>

        <div *ngIf="role === 'profesional'">
          <h3 class="ion-padding-top">Detalles Profesionales (*)</h3>
          
          <ion-item>
              <ion-label position="floating">Especialidad *</ion-label>
              <ion-input type="text" formControlName="specialty"></ion-input>
          </ion-item>
          <ion-item>
              <ion-label position="floating">N° Licencia *</ion-label>
              <ion-input type="text" formControlName="license_number"></ion-input>
          </ion-item>

          <ion-item>
              <ion-label position="floating">Foco Principal *</ion-label>
              <ion-input type="text" formControlName="main_focus"></ion-input>
          </ion-item>
          
          <ion-item>
              <ion-label position="floating">Modalidad de Trabajo *</ion-label>
              <ion-select formControlName="work_modality" placeholder="Selecciona modalidad">
                  <ion-select-option value="online">Online</ion-select-option>
                  <ion-select-option value="presencial">Presencial</ion-select-option>
                  <ion-select-option value="mixto">Mixto</ion-select-option>
              </ion-select>
          </ion-item>

          <ion-item>
              <ion-label position="floating">Técnicas Terapéuticas *</ion-label>
              <ion-textarea formControlName="therapeutic_techniques" rows="3"></ion-textarea>
          </ion-item>
          
          <ion-item>
              <ion-label position="floating">Estilo de Atención *</ion-label>
              <ion-textarea formControlName="style_of_attention" rows="3"></ion-textarea>
          </ion-item>

          <ion-item>
              <ion-label position="floating">Agenda/Horario (Texto simple) *</ion-label>
              <ion-input type="text" formControlName="attention_schedule"></ion-input>
          </ion-item>

          <ion-item>
              <ion-label position="floating">Años de Experiencia (Opcional)</ion-label>
              <ion-input type="number" formControlName="experience_years" min="0"></ion-input>
          </ion-item>
          
          <ion-item>
              <ion-label position="floating">Certificados (Archivos) *</ion-label>
              <ion-input type="file" formControlName="certificates"></ion-input> 
          </ion-item>

          <h3 class="ion-padding-top">Datos Opcionales</h3>
          <ion-item>
              <ion-label>Orientación Inclusiva</ion-label>
              <ion-toggle formControlName="inclusive_orientation"></ion-toggle>
          </ion-item>
        </div>

        <div *ngIf="role === 'paciente'">
          <ion-item class="ion-margin-top">
            <ion-label position="floating">Enfermedad de Base *</ion-label>
            <ion-input type="text" formControlName="base_disease"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating">¿Tiene Discapacidad? *</ion-label>
            <ion-toggle formControlName="disability"></ion-toggle>
          </ion-item>
          </div>

        <div *ngIf="role === 'organizacion'">
           </div>

        <ion-button expand="block" type="submit" [disabled]="!profileForm.valid" class="ion-margin-top">
          Guardar Perfil
        </ion-button>
        
        <ion-button expand="block" fill="clear" (click)="skipSetup()" class="ion-margin-top">
          Omitir (Completar más tarde)
        </ion-button>
        
      </form>
    </ion-card-content>
  </ion-card>

</ion-content>